---
title: "Prepare Transects data"
author: '[Antonio J. PÃ©rez-Luque](https://github.com/ajpelu) <a href="https://orcid.org/0000-0002-1747-0469" target="orcid.widget">
<img alt="ORCID logo" src="https://info.orcid.org/wp-content/uploads/2019/11/orcid_16x16.png" width="16" height="16" /></a>'
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---

- Prepare transect data for use it thorough the analysis

```{r, message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
library(here)
```


```{r}
# Prepare variable transects
transectos <- readxl::read_excel("data/raw_data/Tabla_variables_transectos_22.xls", 
                                 sheet = "Otras variables") |>
  janitor::clean_names() |> 
  filter(transecto != "ENSNEVADA")

write_csv(transectos, "data/transectos_variables.csv")


# Read the transect data 
transectos_metadata <- transectos |> 
  dplyr::select(transecto, id_transect, abreviatura, altitud) |> 
  mutate(site_id = as.numeric(gsub("16_", "", id_transect))) |> 
  unite("abb_elev", c("abreviatura", "altitud"), sep = " (", remove = FALSE) |> 
  mutate(abb_elev = paste0(abb_elev, ")"))

write_csv(transectos_metadata, here::here("data/transectos_metadata.csv"))
```

